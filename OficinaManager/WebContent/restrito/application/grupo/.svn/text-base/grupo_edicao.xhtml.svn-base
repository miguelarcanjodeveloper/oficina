<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<ui:composition>
	<h:form id="cadastro">		
		<h:messages />
		<h:inputHidden value="#{grupoPecasBean.grupo.id_grupo}" />				
		<h:panelGrid columns="1" width="100%">			
			<p:panel header="Cadastro de grupo de peças"
					toggleable="true" toggleSpeed="100">
				<h:panelGrid columns="3" styleClass="topAligned">
			
					<h:outputLabel value="Grupo:" for="grupo" />			
					<h:inputText id="grupo" label="Grupo" value="#{grupoPecasBean.grupo.grupo}" size="30"
			 			maxlength="30" required="true" requiredMessage="Informe um Grupo." onkeyup="up(this)">
						<f:validateLength minimum="2" maximum="30" />
					</h:inputText>															           			    													
						
					<h:panelGrid columns="2">
    					<p:fileUpload fileUploadListener="#{grupoPecasBean.handleFileUpload}"     				
    								process="@this" 
    								invalidSizeMessage="Imagem muito grande"
									invalidFileMessage="Tipo de imagem não suportado"
            						mode="advanced"  
            						update="messages,im, img"  
            						auto="true"  
            						label="Add: Imagem" cancelLabel="Cancelar" sizeLimit="400000"  
            						allowTypes="/(\.|\/)(gif|jpe?g|png)$/"    
            						required="true"
            						requiredMessage="Insira uma imagem."        		
            					/>
            		            			            		    		    			
    						<h:graphicImage 
    								id="img"
    								url="#{grupoPecasBean.grupo.imagem.caminho}"    							
									width="90" height="70" 
    								alt="Adicione uma imagem."    			
    						/>
    						<h:inputHidden id="im" value="#{grupoPecasBean.grupo.imagem.id_imagem}" required="true" requiredMessage="Insira uma imagem de logo" />    			
    						<p:growl id="messages" showDetail="true" />     							
    				</h:panelGrid>    			
						
								
					<p:commandButton process="@this" update="cadastro" action="#{grupoPecasBean.novo}" value="Novo" />						 			
					<p:commandButton process="@form" update="cadastro, :listagem" action="#{grupoPecasBean.salvar}" value="Salvar" />
				</h:panelGrid>
		</p:panel>
		</h:panelGrid>
	</h:form>					        	
</ui:composition>
</html>